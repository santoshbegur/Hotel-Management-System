<div th:fragment="usersForm" th:if="${user != null}">
    <div class="form-container" style="max-width: 400px;">

        <h2 class="mb-2 text-primary text-center"
            th:text="${user.id} != null ? 'Edit User' : 'New User'"></h2>

        <form class="mt-2" onsubmit="submitForm(event, 'users')" th:object="${user}">
            <input th:field="*{id}" type="hidden"/>

            <div class="mb-2">
                <label class="form-label" for="username">Username</label>
                <input class="form-control" id="username" required th:field="*{username}" type="text"/>
            </div>

            <div class="mb-2">
                <label class="form-label" for="email">Email</label>
                <input class="form-control" id="email" required th:field="*{email}" type="email"/>
            </div>

            <div class="mb-2">
                <label class="form-label" for="password">Password</label>
                <input class="form-control" id="password" th:field="*{passwordHash}" th:placeholder="${user.id != null} ? 'Leave blank to keep existing' : ''"
                       type="password"/>
            </div>

            <div class="d-flex gap-2">
                <!-- Save / Update button -->
                <button class="btn btn-success" type="submit">
                    <i class="bi bi-save"></i>
                    <span th:text="${user.id != null} ? 'Update' : 'Create'"></span>
                </button>
                <!-- Back button loads the list fragment -->
                <a class="btn btn-secondary" href="#" onclick="loadList('users')">
                    <i class="bi bi-arrow-left-circle"></i>Back to Users</a>
            </div>
        </form>
    </div>
</div>
