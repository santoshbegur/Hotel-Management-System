<div th:fragment="reservationsForm" th:if="${reservation != null}">
    <div id="reservationsFormContent">
        <div class="form-container" style="max-width: 400px;">

            <h2 class="mb-1 text-primary text-center"
                th:text="${reservation.id} != null ? 'Edit Reservation' : 'New Reservation'">
            </h2>
            <!-- Error Alert -->
            <div class="alert alert-danger" th:if="${error}" th:text="${error}"></div>

            <form class="mt-2" onsubmit="submitForm(event, 'reservations')" th:object="${reservation}">
                <input th:field="*{id}" type="hidden"/>

                <!-- Customer -->
                <div class="mb-2">
                    <label class="form-label" for="customer">Customer</label>
                    <select class="form-select" id="customer" th:field="*{customer.id}">
                        <option th:each="c : ${customers}"
                                th:selected="${reservation.customer != null and c.id == reservation.customer.id}"
                                th:text="${c.firstName + ' ' + c.lastName}"
                                th:value="${c.id}">
                        </option>
                    </select>
                </div>

                <!-- Hotel -->
                <div class="mb-2">
                    <label class="form-label" for="hotel">Hotel</label>
                    <select class="form-select" id="hotel" th:field="*{hotel.id}">
                        <option th:each="h : ${hotels}"
                                th:selected="${reservation.hotel != null and h.id == reservation.hotel.id}"
                                th:text="${h.name}"
                                th:value="${h.id}">
                        </option>
                    </select>
                </div>

                <!-- Status -->
                <div class="mb-2">
                    <label class="form-label" for="status">Status</label>
                    <select class="form-select" id="status" th:field="*{status}">
                        <option th:selected="${reservation.status == 'BOOKED'}" value="BOOKED">Booked</option>
                        <option th:selected="${reservation.status == 'CHECKED_IN'}" value="CHECKED_IN">Checked In
                        </option>
                        <option th:selected="${reservation.status == 'CHECKED_OUT'}" value="CHECKED_OUT">Checked Out
                        </option>
                        <option th:selected="${reservation.status == 'CANCELLED'}" value="CANCELLED">Cancelled</option>
                    </select>
                </div>

                <!-- Check-In Date -->
                <div class="mb-2">
                    <label class="form-label" for="checkIn">Check-In Date</label>
                    <input class="form-control" id="checkIn" th:field="*{checkInDate}" th:type="date"/>
                </div>

                <!-- Check-Out Date -->
                <div class="mb-2">
                    <label class="form-label" for="checkOut">Check-Out Date</label>
                    <input class="form-control" id="checkOut" th:field="*{checkOutDate}" th:type="date"/>
                </div>

                <!-- Total Amount -->
                <div class="mb-2">
                    <label class="form-label" for="totalAmount">Total Amount</label>
                    <input class="form-control" id="totalAmount" th:field="*{totalAmount}" th:type="number"/>
                </div>

                <!-- Buttons -->
                <div class="d-flex gap-2">
                    <!-- Save / Update button -->
                    <button class="btn btn-success" type="submit">
                        <i class="bi bi-save"></i>
                        <span th:text="${reservation.id != null} ? 'Update' : 'Create'"></span>
                    </button>

                    <!-- Back button loads the list fragment -->
                    <a class="btn btn-secondary" href="#" onclick="loadList('reservations')">
                        <i class="bi bi-arrow-left-circle"></i>Back to Reservations
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
