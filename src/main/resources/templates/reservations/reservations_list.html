<div th:fragment="reservationsList">
    <div class="form-container" style="max-width: 1200px;">
        <div class="container mt-1" style="max-width: 1200px;" id="reservationsContent">
            <h2 class="mb-2">Reservations</h2>
        <div class="mb-1">
            <button class="btn btn-primary btn-sm" th:onclick="'loadForm(\'reservations\')'">
                <i class="bi bi-plus-circle"></i>Add Reservation
            </button>
        </div>
            <!-- Alert container -->
            <div class="mt-2" id="alertContainer"></div>
            <div class="table-responsive">
                <table class="table table-bordered table-striped table-hover table-sm align-left text-wrap data-table">
                    <thead class="table-dark">
                    <tr class="text-left align-left">
                        <th style="width: 2%">ID</th>
                        <th class="text-wrap" style="width: 12%">Customer Name</th>
                        <th class="text-wrap" style="width: 15%">Hotel Name</th>
                        <th style="width: 10%">Status</th>
                        <th style="width: 8%">CheckIn</th>
                        <th style="width: 8%">CheckOut</th>
                        <th style="width: 4%">Room</th>
                        <th style="width: 10%">Room Type</th>
                        <th style="width: 4%">Nights</th>
                        <th style="width: 6%">Price/Night</th>
                        <th style="width: 6%">Total</th>
                        <th style="width: 7%">Actions</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="reservation : ${reservations}" class="align-left">
                        <td th:text="${reservation.id}"></td>
                        <td th:text="${reservation.customer.firstName + ' ' + reservation.customer.lastName}"></td>
                        <td th:text="${reservation.hotel.name}"></td>
                        <td th:text="${reservation.status}"></td>
                        <td th:text="${#temporals.format(reservation.checkInDate, 'dd-MM-yyyy')}"></td>
                        <td th:text="${#temporals.format(reservation.checkOutDate, 'dd-MM-yyyy')}"></td>
                        <!-- Room details from reservation_lines -->
                        <td th:text="${#lists.isEmpty(reservation.reservationLines) || reservation.reservationLines[0].room == null ? '-' : reservation.reservationLines[0].room.roomNumber}"></td>
                        <td th:text="${#lists.isEmpty(reservation.reservationLines) || reservation.reservationLines[0].room == null ? '-' : reservation.reservationLines[0].room.roomType.name}"></td>
                        <td th:text="${#lists.isEmpty(reservation.reservationLines) || reservation.reservationLines[0].nights == null ? '-' : reservation.reservationLines[0].nights}"></td>
                        <td th:text="${#lists.isEmpty(reservation.reservationLines) || reservation.reservationLines[0].pricePerNight == null ? '-' : reservation.reservationLines[0].pricePerNight}"></td>
                        <td class="fw-semibold" th:text="${reservation.totalAmount}"></td>
                        <td class="text-center">
                            <button class="btn btn-sm btn-warning me-1"
                                    th:onclick="'loadForm(\'reservations\', ' + ${reservation.id} + ')'">
                                <i class="bi bi-pencil-square"></i>
                            </button>
                            <button class="btn btn-sm btn-danger"
                                    th:onclick="'deleteItem(\'reservations\', ' + ${reservation.id} + ')'">
                                <i class="bi bi-trash"></i>
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

