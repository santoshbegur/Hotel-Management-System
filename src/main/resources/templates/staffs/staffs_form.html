<div th:fragment="staffsForm" th:if="${staff != null}">
    <div class="form-container" style="max-width: 400px;">

        <h2 class="mb-2 text-primary text-center"
            th:text="${staff.id} != null ? 'Edit Staff' : 'New Staff'"></h2>

        <form class="mt-2" onsubmit="submitForm(event, 'staffs')" th:object="${staff}">
            <input th:field="*{id}" type="hidden"/>

            <div class="mb-2">
                <label class="form-label" for="user">User</label>
                <select class="form-select" id="user" th:field="*{user.id}">
                    <option th:each="u : ${users}" th:selected="${staff.user != null and u.id == staff.user.id}"
                            th:text="${u.username}"
                            th:value="${u.id}">
                    </option>
                </select>
            </div>

            <div class="mb-2">
                <label class="form-label" for="role">Role</label>
                <select class="form-select" id="role" th:field="*{role.id}">
                    <option th:each="r : ${roles}" th:selected="${staff.role != null and r.id == staff.role.id}" th:text="${r.name}"
                            th:value="${r.id}">
                    </option>
                </select>
            </div>

            <div class="mb-2">
                <label class="form-label" for="hotel">Hotel</label>
                <select class="form-select" id="hotel" th:field="*{hotel.id}">
                    <option th:each="h : ${hotels}" th:selected="${staff.hotel != null and h.id == staff.hotel.id}" th:text="${h.name}"
                            th:value="${h.id}">
                    </option>
                </select>
            </div>

            <div class="mb-2">
                <label class="form-label" for="joinedDate">Joined Date</label>
                <input class="form-control" id="joinedDate" th:field="*{joinedDate}" th:type="date"/>
            </div>

            <div class="d-flex gap-2">
                <!-- Save / Update button -->
                <button class="btn btn-success" type="submit">
                    <i class="bi bi-save"></i>
                    <span th:text="${staff.id != null} ? 'Update' : 'Create'"></span>
                </button>

                <!-- Back button loads the list fragment -->
                <a class="btn btn-secondary" href="#" onclick="loadList('staffs')">
                    <i class="bi bi-arrow-left-circle"></i>Back to Staffs</a>
            </div>
        </form>
    </div>
</div>
